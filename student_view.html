<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student View | GROWTHetect</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="bg-gray-100 min-h-screen p-6">
    <h1 class="text-3xl font-bold text-green-600 mb-6" id="student-title">Student BMI History</h1>

    <!-- Back Button -->
    <div class="mb-6">
      <a href="data_logs.html" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium">Back to Data Logs</a>
    </div>

    <!-- History Table -->
    <div class="overflow-x-auto bg-white rounded-lg shadow">
      <table class="min-w-full border border-gray-200 text-sm">
        <thead class="bg-green-500 text-white">
          <tr>
            <th class="px-4 py-2 border">Date</th>
            <th class="px-4 py-2 border">Weight (kg)</th>
            <th class="px-4 py-2 border">Height (cm)</th>
            <th class="px-4 py-2 border">BMI</th>
            <th class="px-4 py-2 border">BMI Status</th>
          </tr>
        </thead>
        <tbody id="history-body" class="text-gray-700">
          <!-- History rows will be inserted here by JavaScript -->
        </tbody>
      </table>
    </div>

    <script>
      // Sample history data for each LRN (based on original table, with logical progression)
      const historyData = {
        '2023001': [
          { date: '2024-08-20', weight: 28, height: 128, bmi: 17.1, status: 'Normal', color: 'text-green-600' },
          { date: '2024-09-20', weight: 29, height: 129, bmi: 17.4, status: 'Normal', color: 'text-green-600' },
          { date: '2024-10-20', weight: 29.5, height: 130, bmi: 17.5, status: 'Normal', color: 'text-green-600' },
          { date: '2025-10-20', weight: 30, height: 130, bmi: 17.8, status: 'Normal', color: 'text-green-600' }
        ],
        '2023002': [
          { date: '2024-08-20', weight: 23, height: 133, bmi: 13.0, status: 'Underweight', color: 'text-yellow-500' },
          { date: '2024-09-20', weight: 24, height: 134, bmi: 13.3, status: 'Underweight', color: 'text-yellow-500' },
          { date: '2024-10-20', weight: 24.5, height: 135, bmi: 13.4, status: 'Underweight', color: 'text-yellow-500' },
          { date: '2025-10-20', weight: 25, height: 135, bmi: 13.7, status: 'Underweight', color: 'text-yellow-500' }
        ],
        '2023003': [
          { date: '2024-08-21', weight: 38, height: 143, bmi: 18.6, status: 'Normal', color: 'text-green-600' },
          { date: '2024-09-21', weight: 39, height: 144, bmi: 18.8, status: 'Normal', color: 'text-green-600' },
          { date: '2024-10-21', weight: 39.5, height: 145, bmi: 18.9, status: 'Normal', color: 'text-green-600' },
          { date: '2025-10-21', weight: 40, height: 145, bmi: 19.0, status: 'Normal', color: 'text-green-600' }
        ],
        '2023004': [
          { date: '2024-08-19', weight: 33, height: 123, bmi: 21.8, status: 'Overweight', color: 'text-orange-500' },
          { date: '2024-09-19', weight: 34, height: 124, bmi: 22.1, status: 'Overweight', color: 'text-orange-500' },
          { date: '2024-10-19', weight: 34.5, height: 125, bmi: 22.2, status: 'Overweight', color: 'text-orange-500' },
          { date: '2025-10-19', weight: 35, height: 125, bmi: 22.4, status: 'Overweight', color: 'text-orange-500' }
        ],
        '2023005': [
          { date: '2024-08-20', weight: 48, height: 138, bmi: 25.1, status: 'Obese', color: 'text-red-500' },
          { date: '2024-09-20', weight: 49, height: 139, bmi: 25.3, status: 'Obese', color: 'text-red-500' },
          { date: '2024-10-20', weight: 49.5, height: 140, bmi: 25.4, status: 'Obese', color: 'text-red-500' },
          { date: '2025-10-20', weight: 50, height: 140, bmi: 25.5, status: 'Obese', color: 'text-red-500' }
        ],
        '2023006': [
          { date: '2024-08-18', weight: 26, height: 130, bmi: 15.4, status: 'Normal', color: 'text-green-600' },
          { date: '2024-09-18', weight: 27, height: 131, bmi: 15.7, status: 'Normal', color: 'text-green-600' },
          { date: '2024-10-18', weight: 27.5, height: 132, bmi: 15.8, status: 'Normal', color: 'text-green-600' },
          { date: '2025-10-18', weight: 28, height: 132, bmi: 16.0, status: 'Normal', color: 'text-green-600' }
        ],
        '2023007': [
          { date: '2024-08-21', weight: 20, height: 126, bmi: 12.6, status: 'Underweight', color: 'text-yellow-500' },
          { date: '2024-09-21', weight: 21, height: 127, bmi: 13.0, status: 'Underweight', color: 'text-yellow-500' },
          { date: '2024-10-21', weight: 21.5, height: 128, bmi: 13.1, status: 'Underweight', color: 'text-yellow-500' },
          { date: '2025-10-21', weight: 22, height: 128, bmi: 13.4, status: 'Underweight', color: 'text-yellow-500' }
        ],
        '2023008': [
          { date: '2024-08-21', weight: 31, height: 136, bmi: 16.7, status: 'Normal', color: 'text-green-600' },
          { date: '2024-09-21', weight: 32, height: 137, bmi: 17.0, status: 'Normal', color: 'text-green-600' },
          { date: '2024-10-21', weight: 32.5, height: 138, bmi: 17.1, status: 'Normal', color: 'text-green-600' },
          { date: '2025-10-21', weight: 33, height: 138, bmi: 17.3, status: 'Normal', color: 'text-green-600' }
        ],
        '2023009': [
          { date: '2024-08-20', weight: 46, height: 148, bmi: 21.0, status: 'Overweight', color: 'text-orange-500' },
          { date: '2024-09-20', weight: 47, height: 149, bmi: 21.2, status: 'Overweight', color: 'text-orange-500' },
          { date: '2024-10-20', weight: 47.5, height: 150, bmi: 21.1, status: 'Overweight', color: 'text-orange-500' },
          { date: '2025-10-20', weight: 48, height: 150, bmi: 21.3, status: 'Overweight', color: 'text-orange-500' }
        ],
        '2023010': [
          { date: '2024-08-19', weight: 18, height: 118, bmi: 12.9, status: 'Underweight', color: 'text-yellow-500' },
          { date: '2024-09-19', weight: 19, height: 119, bmi: 13.4, status: 'Underweight', color: 'text-yellow-500' },
          { date: '2024-10-19', weight: 19.5, height: 120, bmi: 13.5, status: 'Underweight', color: 'text-yellow-500' },
          { date: '2025-10-19', weight: 20, height: 120, bmi: 13.9, status: 'Underweight', color: 'text-yellow-500' }
        ]
      };

      // Student names mapping
      const studentNames = {
        '2023001': 'Juan Dela Cruz',
        '2023002': 'Maria Santos',
        '2023003': 'Jose Ramirez',
        '2023004': 'Ana Cruz',
        '2023005': 'Carlos Dizon',
        '2023006': 'Liza Mendoza',
        '2023007': 'Mark Villanueva',
        '2023008': 'Sofia Lopez',
        '2023009': 'Ramon Gutierrez',
        '2023010': 'Ella Reyes'
      };

      // Get LRN from URL
      const urlParams = new URLSearchParams(window.location.search);
      const lrn = urlParams.get('lrn');

      if (lrn && historyData[lrn]) {
        // Update title with student name
        document.getElementById('student-title').textContent = `BMI History for ${studentNames[lrn]}`;

        // Populate table
        const tbody = document.getElementById('history-body');
        historyData[lrn].forEach(entry => {
          const row = document.createElement('tr');
          row.className = 'hover:bg-gray-50';
          row.innerHTML = `
            <td class="px-4 py-3 border">${entry.date}</td>
            <td class="px-4 py-3 border">${entry.weight}</td>
            <td class="px-4 py-3 border">${entry.height}</td>
            <td class="px-4 py-3 border">${entry.bmi}</td>
            <td class="px-4 py-3 border ${entry.color} font-semibold">${entry.status}</td>
          `;
          tbody.appendChild(row);
        });
      } else {
        // If no valid LRN, show error
        document.getElementById('student-title').textContent = 'Student Not Found';
        document.getElementById('history-body').innerHTML = '<tr><td colspan="5" class="px-4 py-3 border text-center text-red-500">No history available for this student.</td></tr>';
      }
    </script>
  </body>
</html>
